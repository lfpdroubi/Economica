<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; Matemática Financeira – Engenharia Econômica e Avaliação de Aluguéis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./economica.html" rel="next">
<link href="./intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./financeira.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Matemática Financeira</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Engenharia Econômica e Avaliação de Aluguéis</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./financeira.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Matemática Financeira</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./economica.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Engenharia Econômica</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./alugueis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Avaliação de Aluguéis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Considerações Finais</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./anexo_I.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./anexo_II.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo II</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./anexo_III.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo III</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./anexo_IV.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo IV</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./anexo_V.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo V</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introdução" id="toc-introdução" class="nav-link active" data-scroll-target="#introdução"><span class="header-section-number">2.1</span> Introdução</a></li>
  <li><a href="#juros-simples-e-juros-compostos" id="toc-juros-simples-e-juros-compostos" class="nav-link" data-scroll-target="#juros-simples-e-juros-compostos"><span class="header-section-number">2.2</span> Juros simples e juros compostos</a></li>
  <li><a href="#séries-de-pagamentos" id="toc-séries-de-pagamentos" class="nav-link" data-scroll-target="#séries-de-pagamentos"><span class="header-section-number">2.3</span> Séries de pagamentos</a>
  <ul class="collapse">
  <li><a href="#fundo-de-amortização" id="toc-fundo-de-amortização" class="nav-link" data-scroll-target="#fundo-de-amortização"><span class="header-section-number">2.3.1</span> Fundo de Amortização</a></li>
  </ul></li>
  <li><a href="#séries-gradientes-uniformes" id="toc-séries-gradientes-uniformes" class="nav-link" data-scroll-target="#séries-gradientes-uniformes"><span class="header-section-number">2.4</span> Séries Gradientes Uniformes</a>
  <ul class="collapse">
  <li><a href="#séries-gradientes-em-pa" id="toc-séries-gradientes-em-pa" class="nav-link" data-scroll-target="#séries-gradientes-em-pa"><span class="header-section-number">2.4.1</span> Séries Gradientes em PA</a></li>
  <li><a href="#séries-gradientes-uniformes-em-pg" id="toc-séries-gradientes-uniformes-em-pg" class="nav-link" data-scroll-target="#séries-gradientes-uniformes-em-pg"><span class="header-section-number">2.4.2</span> Séries Gradientes Uniformes em PG</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-finan" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Matemática Financeira</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>A matemática financeira está na base de todos os métodos da engenharia econômica. Neste capítulo, toda a matemática financeira necessária para aplicação de dos métodos de engenharia econômica que serão tratados no <a href="economica.html" class="quarto-xref"><span>Chapter 3</span></a> é detalhada aqui.</p>
<p>O leitor já familiarizado com os temas da matemática financeira pode seguir diretamente para o <a href="economica.html" class="quarto-xref"><span>Chapter 3</span></a>. Entendemos, no entanto, que mesmo o leitor mais capacitado se beneficiaria da leitura deste capítulo com fins de revisar os principais métodos e compreender melhor a nossa abordagem sobre o assunto.</p>
<section id="introdução" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="introdução"><span class="header-section-number">2.1</span> Introdução</h2>
<p>A matemática financeira contém as principais ferramentas necessárias para a realização de boas análises de investimentos. A matemática financeira é necessária para compreender a relação entre os diversos componentes de um fluxo de caixa como o da <a href="#fig-FC" class="quarto-xref">Figura&nbsp;<span>2.1</span></a>.</p>
<p>Neste livro, procuraremos manter as coisas de forma simples. Porém, não entendemos que ao engenheiro analista de investimentos baste uma boa planilha eletrônica, com funções de matemática financeira pré-programadas. Assim, entendemos que são úteis ao engenheiro o entendimento de como as contas eram feitas antes das planilhas eletrônicas e das calculadoras financeiras, especialmente porque frequentemente vale mais uma conta aproximada que esteja correta e clara do que uma planilha eletrônica com muitas células, com um fluxo de caixa bem longo e complexo e… com um pequeno erro de programação, que invalida todos os resultados obtidos com ela. O engenheiro que se esforçar para aprender como as análises de investimento eram feitas no tempo das tábuas, certamente irá adquirir um bom senso, uma ordem de grandeza nas coisas que lhe permitirão, posteriormente, verificar os resultados de uma planilha de cálculo extensa para garantir que ela esteja correta.</p>
</section>
<section id="juros-simples-e-juros-compostos" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="juros-simples-e-juros-compostos"><span class="header-section-number">2.2</span> Juros simples e juros compostos</h2>
<p>O conhecimento mais básico da matemática financeira é a análise de descontos simples, ou seja, dos descontos efetuados com taxas de juros simples. Na prática, os descontos simples são utilizados no Brasil para o cômputo de dos boletos bancários que são emitidos com descontos para pagamento até uma determinada data.</p>
<p>Por exemplo, se um boleto com valor de R$ 1.000,00 é emitido para pagamento com desconto de 10% até o dia 05 de um determinado mês, o valor do desconto será de <span class="math inline">\(10\%\times 1.000 = \text{R\$ } 100,00\)</span>.</p>
<p>Além dos descontos, nos boletos bancários estão inclusos multa e juros para o pagamento por atraso. Por exemplo, caso o mesmo boleto acima não seja pago até a data do seu vencimento, poderá ser cobrado multa de 2%, além de juros de 1% a.m., proporcionais ao tempo de atraso. A multa pelo não pagamento até o vencimento, portanto, no caso do boleto de R$ 1.000,00, será de R$ 20,00. Se o pagador atrasar um dia, os juros serão de 1%/30 = 0,0333%, ou seja, R$ 0,33. Caso o pagador atrase por mais dias, basta multiplicar este valor pelo número de dias em atraso. Por exemplo, para 10 dias de atraso, os juros serão de R$ 3,33. Isto porque os juros aplicados sobre o pagamento com atraso dos boletos são juros simples. Matematicamente, os juros simples podem ser calculados de acordo com a Equação <a href="#eq-jurossimples" class="quarto-xref"><span>2.1</span></a>:</p>
<p><span id="eq-jurossimples"><span class="math display">\[
J = C.i.t
\tag{2.1}\]</span></span></p>
<p>No caso exemplificado, para um atraso de 10 dias, com juros de 1% a.m.:</p>
<p><span class="math display">\[
J = C.i.t = 1000.\frac{1,0\%}{30}.10 = 3,33
\]</span></p>
<p>Para os juros compostos, contudo, as coisas mudam de figura, pois os juros compostos incidem sobre os juros do período anterior, de forma que:</p>
<p><span id="eq-juroscompostos"><span class="math display">\[
M = C.(1+i)^t
\tag{2.2}\]</span></span></p>
<p>Os juros compostos são mais comuns na análise de investimentos. Seja o caso, por exemplo, de computar o juro que rende uma caderneta de poupança (que remunera a uma taxa de 0,50% a.m.), durante 3 períodos, com saldo inicial de R$ 1.000,00: no primeiro mês, a caderneta irá gerar R$ 5,00 de juros. No segundo mês, a caderneta irá gerar 0,5% de retorno, assim como no primeiro mês. Porém, o saldo sobre o qual este retorno irá incidir é o saldo ao final do primeiro mês, isto é, R$ 1.005,00. Portanto, no segundo mês, a caderneta de poupança irá render R$ 5,025, e o saldo ao final do segundo mês, assim, será de R$ 1.010,025. No terceiro mês, por fim, o rendimento será de R$ 5,05 e o saldo ao final do terceiro mês será de R$ 1.015,075.</p>
<p>O saldo final do terceiro mês pode ser obtido diretamente através da equação <a href="#eq-juroscompostos" class="quarto-xref"><span>2.2</span></a>:</p>
<p><span class="math display">\[
M = 1000.(1+0,5\%)^3 = 1.015,075
\]</span></p>
<p>Para curtos períodos e baixas taxas de juros, como as do exemplo, não faz muita diferença o cálculo com juros compostos ou simples. Com juros simples, o saldo final obtido para o terceiro período seria de R$ 1.015,00, uma diferença de apenas 7 centavos.</p>
<p>No entanto, para um prazo maior, por exemplo, de 60 meses, o saldo final da caderneta de poupança com aplicação inicial de R$ 1.000,00 será de R$ 1.348,85. Se o saldo da caderneta de poupança fosse calculado com juros simples este saldo após 60 meses seria de, apenas, R$ 1.300,00, uma diferença significativa em relação ao valor real, calculado com juros compostos.</p>
<p>Assim como é possível obter o montante <span class="math inline">\(M\)</span> através de um Capital <span class="math inline">\(C\)</span> e uma taxa de juros, também é possível saber qual o capital necessário para obter, após alguns períodos, um determinado montante, a uma taxa de juros fixa.</p>
<p>Suponha que um investidor tenha que honrar uma parcela com vencimento num prazo de 6 meses, de valor igual a R$ 20.000,00. Ele pretende alocar o seu capital em investimentos de mais longo prazo, mas ele precisa reservar um valor numa aplicação de mais curto prazo, que ele possa sacar daqui a 6 meses, para pagar a parcela devida. Suponha que o investidor pretenda deixar apenas o recurso necessário para o pagamento desta parcela na caderneta de poupança, qual o valor do capital que ele precisa alocar na data de hoje, para que ele tenha exatamente R$ 20.000,00 daqui a seis meses? Para isto, ele pode utilizar a <a href="#eq-FAC" class="quarto-xref">Equação&nbsp;<span>2.3</span></a>:</p>
<p><span id="eq-FAC"><span class="math display">\[
C = M.\frac{1}{(1+i)^t}
\tag{2.3}\]</span></span></p>
<p>O termo <span class="math inline">\(\frac{1}{(1+i)^t}\)</span> é denominado <strong>Fator de Atualização do Capital</strong> (FAC), que pode ser tabelado para diversos períodos e valores de taxas de desconto (ver [Anexo I]).</p>
<p>Portanto, para o investidor honrar a parcela daqui a seis meses, ele precisará alocar na caderneta de poupança, hoje:</p>
<p><span class="math display">\[
C = 20.000,00.\text{FAC}(0,5\%,6) = 20.000,00\times 0,9705 = \text{R\$ }19.410,00
\]</span></p>
</section>
<section id="séries-de-pagamentos" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="séries-de-pagamentos"><span class="header-section-number">2.3</span> Séries de pagamentos</h2>
<p>Para facilitar a compreensão das análises de investimentos que iremos desenvolver no <a href="economica.html" class="quarto-xref"><span>Chapter 3</span></a>, assim como para as avaliações de aluguéis no <a href="alugueis.html" class="quarto-xref"><span>Chapter 4</span></a>, faz-se necessário conhecer os métodos utilizados para a análise de séries de pagamentos fixos, uma simplificação aceita muito utilizada tanto na engenharia econômica e na engenharia de avaliações.</p>
<p>Primeiramente, seja o caso de calcular o valor de uma prestação para pagamento de um empréstimo, a ser amortizado em parcelas fixas. Se o valor emprestado é de R$ 400.000,00 e a taxa de juros é de 3% a.m., para pagamento em 12 prestações, como obter o valor da prestação?</p>
<p>O problema que se apresenta pode ser escrito matematicamente da seguinte forma:</p>
<p><span id="eq-emprestimo"><span class="math display">\[
C = \frac{P_1}{1+i} + \frac{P_2}{(1+i)^2} + \frac{P_3}{(1+i)^3} + \cdots + \frac{P_t}{(1+i)^t}
\tag{2.4}\]</span></span></p>
<p>Como adimitimos que as prestações <span class="math inline">\(P_1, P_2, \ldots, P_t\)</span> serão iguais, o lado direito da equação <a href="#eq-emprestimo" class="quarto-xref"><span>2.4</span></a> torna-se <span class="citation" data-cites="Machline">(<a href="references.html#ref-Machline" role="doc-biblioref">Machline 1966, 81</a>)</span>:</p>
<p><span id="eq-MVA1"><span class="math display">\[
P = C\frac{i(1+i)^t}{(1+i)^t-1}
\tag{2.5}\]</span></span></p>
<p>O termo <span class="math inline">\(\frac{i(1+i)^t}{(1+i)^t-1}\)</span> é conhecido como <strong>Fator de Recuperação do Capital</strong> (FRC), ou <strong>Fator de Amortização</strong>. É um termo que, multiplicado pelo valor atual de um empréstimo (ou de um investimento), representa o valor da prestação fixa que irá trazer o capital de volta, para uma determinada taxa de juros e número de períodos pré-estabelecidos<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. O FRC pode ser facilmente tabelado (ver [Anexo II]).</p>
<p>No exemplo, para uma taxa de juros é de 3% a.m. e 12 períodos, o Fator de Recuperação do Capital será igual a:</p>
<p><span class="math display">\[
\text{FRC} = \frac{3\%(1+3\%)^{12}}{(1+3\%)^{12}-1} = 0,1005
\]</span></p>
<p>O valor da prestação será, portanto:</p>
<p><span class="math display">\[
P = C.\text{FRC}(3\%,12) = 400.000 \times 0,1005 = \text{R\$ }40.200,00
\]</span></p>
<p>O Fluxo de Caixa final do empréstimo pode ser visto na <a href="#fig-FC" class="quarto-xref">Figura&nbsp;<span>2.1</span></a>:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-FC" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center" data-fig-pos="H">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-FC-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./img-modelagem/fig-FC-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" data-fig-pos="H">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-FC-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.1: Fluxo de Caixa de um empréstimo com pagamentos constantes.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Assim como é possível calcular o valor de uma prestação à partir de um capital, dada uma taxa de juros e um número de períodos, é possível fazer o inverso, ou seja, à partir do valor da prestação, da taxa de juros e do número de períodos, calcular o capital atual.</p>
<p>Por exemplo, imagine que um cidadão com renda mensal de R$ 10.000,00, ao consultar um banco para pleitear um financiamento para a aquisição da sua casa própria no valor de R$ 500.000,00 pelo sistema <em>price</em> de amortização, queira saber o valor da entrada necessária, dado que apenas 30% da sua renda pode ser comprometida para o pagamento do empréstimo. Para isto, basta aplicar a equação <a href="#eq-MVA2" class="quarto-xref"><span>2.6</span></a>, que traz para o valor presente uma série de pagamentos constantes a uma taxa de juros <span class="math inline">\(i\)</span> e um número de períodos <span class="math inline">\(t\)</span>:</p>
<p><span id="eq-MVA2"><span class="math display">\[
C = P\frac{(1+i)^t-1}{i(1+i)^t}
\tag{2.6}\]</span></span></p>
<p>O termo <span class="math inline">\(\frac{(1+i)^t-1}{i(1+i)^t}\)</span> é conhecido como <strong>Fator de Valor Presente</strong>. É um termo que, multiplicado pelo valor de uma prestação fixa que se prolonga por um número <span class="math inline">\(t\)</span> de períodos, a uma dada taxa de juros <span class="math inline">\(i\)</span>, irá representar o valor presente desta série de prestações.</p>
<p>No exemplo, se a taxa de juros é de 10% a.a. e o cidadão pretende financiar o imóvel em 360 meses, então:</p>
<p><span class="math display">\[
\text{FVP} = \frac{(1+0,80\%)^{360}-1}{0,80\%(1+0,80\%)^{360}} = 117,90
\]</span></p>
<p>Assim, uma série de pagamentos de 360 parcelas fixas de R$ 3.000,00 terá valor presente igual a:</p>
<p><span class="math display">\[
C = P.\text{FVP}(0,80\%,360) = 3.000 \times 117,90 = \text{R\$ } 353.700,00
\]</span></p>
<p>Como o preço atual da casa é de R$ 500.000,00, o cidadão terá que desembolsar à vista o valor de R$ 146.300,00 para a aquisição da casa.</p>
<p>Os valores de FRC e FVP podem ser tabelados para diferentes taxas de juros e números de períodos, como podem ser vistas no [Anexo I]. Estas tabelas facilitam o cálculo das prestações e capitais atuais.</p>
<p>As tabelas auxiliam a encontrar as taxas de juros, que não tem cálculo trivial, quando são conhecidos o valor presente e as prestações.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
O parcelado “sem juros” da economia brasileira
</div>
</div>
<div class="callout-body-container callout-body">
<p>É muito comum o parcelamento de compras na economia brasileira. É muito frequente que os anúncios digam que uma compra pode ser parcelada em 10 ou 12 prestações sem juros (12x sem juros).</p>
<p>Por exemplo, pode-se comprar uma geladeira em 10x de R$ 400,00, “sem juros”. Porém, as lojas também dão a opção de comprar com “desconto” de 5% no PIX, ou seja, no PIX, com “desconto”, o preço é de R$ 3.800,00.</p>
<p>Vamos calcular a taxa de juros embutida neste parcelamento, utilizando a <a href="#eq-MVA2" class="quarto-xref">Equação&nbsp;<span>2.6</span></a> e as tabelas do [Anexo III]:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
C &amp;= P.\text{FVP}(i\%, t) \\
3.800 &amp;= 400.\text{FVP}(i\%, 10) \\
\text{FVP}(i\%, 10) &amp;= 9,50 \\
\end{split}
\end{aligned}
\]</span> Encontrado o valor de FVP para o período de 12 meses (9,50), basta procurar na tabela do [Anexo III] o valor mais próximo deste. Pesquisando na <a href="anexo_III.html#tbl-FVP" class="quarto-xref">Tabela&nbsp;<span>1</span></a>, na linha de 10 períodos, encontramos o valor 9,497 (muito próximo) na coluna da taxa igual a 0,95% a.m., o que equivale a uma taxa anual de 12% a.a.</p>
<p>Quanto maior o “desconto” no PIX, maior a taxa, naturalmente. Veja este exemplo: um <em>smartphone</em> anunciado por R$ 2.998,89, que pode ser parcelado “sem juros” em 10 parcelas de 299,89, porém pode também ser pago via PIX por R$ 2.699,00, um “desconto” de 10%. Vamos calcular os juros embutidos:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
C &amp;= P.\text{FVP}(i\%, t) \\
2.699,00 &amp;= 299,89.\text{FVP}(i\%, 10) \\
\text{FVP}(i\%, 10) &amp;= 9,0 \\
\end{split}
\end{aligned}
\]</span> Pesquisando na <a href="anexo_III.html#tbl-FVP" class="quarto-xref">Tabela&nbsp;<span>1</span></a>, na linha de 10 períodos, encontra-se que a taxa de juros é um pouco menor do que 2% a.m., o equivalente a uma taxa de juros anual de 26,82% a.a.!!!</p>
</div>
</div>
<section id="fundo-de-amortização" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="fundo-de-amortização"><span class="header-section-number">2.3.1</span> Fundo de Amortização</h3>
<p>Fundo de Amortização ou Montante de uma série de prestações, é o valor total futuro (ou montante) que uma série de prestações produz, ao final do período, na vigência de uma determinada taxa de juros.</p>
<p>Para pagamentos realizados sempre no final de cada período, o montante pode ser calculado assim (notar que a última prestação não produz juros, porque é feita no final do período):</p>
<p><span class="math display">\[
M = P_{1}(1+i)^{n-1}+P_{2}(1+i)^{n-2} + \ldots + P_{n-2}(1+i)^{2}+P_{n-1}(1+i) + P_n
\]</span></p>
<p>Se o valor das prestações <span class="math inline">\(P_1, P_2, \ldots, P_n\)</span> são todos iguais a <span class="math inline">\(P\)</span>, então:</p>
<p><span id="eq-montante"><span class="math display">\[
M = P\frac{(1+i)^t-1}{i}
\tag{2.7}\]</span></span></p>
<p>O termo <span class="math inline">\(\frac{(1+i)^t-1}{i}\)</span> é denominado <strong>Fator de Acumulação Composta</strong> (FAcC). Estes valores encontram-se tabelados para diversos números de períodos e taxas de juros no [Anexo IV]. Esta <a href="#eq-montante" class="quarto-xref">Equação&nbsp;<span>2.7</span></a> é utilizada para descobrir qual o capital acumulado após um determinado número de aplicações periódicas uniformes em um investimento com rentabilidade pré-fixada, como a caderneta de poupança. Por exemplo, seja o caso de um cidadão pretender depositar R$ 5.000,00 na sua caderneta de poupança mensalmente, durante um período de 24 meses. Qual será o seu saldo ao final do período?</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
M &amp;= P.\text{FAcC}(0,50\%, 24) \\
M &amp;= 5.000,00 \times 25,43
M &amp;= 127.159,80
\end{split}
\end{aligned}
\]</span></p>
<p>A operação inversa consiste em procurar o valor da parcela periódica necessária para a obtenção de um determinado montante no futuro, dada uma taxa de juros e um número fixo de períodos. Isto pode ser feito com a utilização da <a href="#eq-ffa" class="quarto-xref">Equação&nbsp;<span>2.8</span></a>:</p>
<p><span id="eq-ffa"><span class="math display">\[
P = M\frac{i}{(1+i)^t-1}
\tag{2.8}\]</span></span></p>
<p>O termo <span class="math inline">\(\frac{i}{(1+i)^t-1}\)</span> é denominado <strong>Fator de Fundo de Amortização</strong> (FFA). Este fator encontra-se tabelado no [Anexo V].</p>
<p>Seja o caso de saber qual o valor da prestação para que o mutuário consiga juntar R$ 146.300,00 (valor da entrada para compra do imóvel) ao aplicar mensalmente esta prestação em uma caderneta de poupança, durante 24 meses?</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
P &amp;= M.\text{FFA}(0,5\%, 24) \\
P &amp;= 146.300 \times 0,0393 \\
P &amp;\approx 5.750,00
\end{split}
\end{aligned}
\]</span></p>
<p>Fixada a taxa de juros e o valor da prestação, pode-se proceder de maneira a encontrar o número de períodos necessário para se juntar um determinado montante. Para isto, basta calcular o valor do FFA necessário e pesquisá-lo na tabela do [Anexo V] na coluna correspondente à taxa de juros da aplicação. Por exemplo, se o mutuário apenas consegue juntar R$ 3.000,00 ao mês, com a taxa de juros de 0,5% a.m., tem-se, de acordo com a <a href="#eq-ffa" class="quarto-xref">Equação&nbsp;<span>2.8</span></a>:</p>
<p><span class="math display">\[
3.000 = 146.300.\text{FFA}(0,5\%,t) \Rightarrow \text{FFA}(0,50\%, t) = 0,0205
\]</span></p>
<p>Pesquisando na tábua do FFA [Anexo V], encontra-se que o mutuário teria que juntar R$ 3.000,00 durante <span class="math inline">\(t = 44\)</span> meses para obter o montante necessário para dar a entrada necessária no imóvel.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Poupando para a aposentadoria
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine que um jovem de 20 anos de idade esteja iniciando sua carreira na área de Engenharia e pretenda, desde muito cedo, planejar a sua aposentadoria. Ele abre então uma caderneta de poupança onde pretende depositar mensalmente a quantia fixa de R$ 500,00. Caso o engenheiro seja fiel à sua estratégia, com 65 anos, qual o montante que o engenheiro acumulará na caderneta de poupança ao longo da sua vida laboral? Desconsidere os efeitos da inflação.</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
M &amp;= P\frac{(1+i)^t-1}{i} \\
M &amp;= 500.\text{FAcC}(0,5\%, 45\times12) = 500.\text{FAcC}(0,5\%, 540)\\
M &amp;= 500\times2.756\\
M &amp;= \text{R\$ }1.378.000
\end{split}
\end{aligned}
\]</span></p>
<p>Suponha agora o jovem pretenda ter uma renda de R$ 10.000,00/mensais depois que se aposentar. Por quanto tempo o engenheiro poderá usufruir desta renda mensal com o montante acumulado? Lembrar que o saldo continua rendendo juros, mesmo com as retiradas mensais, porém sobre um valor cada vez menor.</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
C &amp;= P\frac{(1+i)^t-1}{i(1+i)^t} \\
1.378.000 &amp;= 10.000,00.\text{FVP}(0,5\%, n) \\
\text{FVP}(0,5\%, n) &amp;= 137,80 \Leftrightarrow n = 234
\end{split}
\end{aligned}
\]</span></p>
<p>É interessante observar o efeitos dos juros compostos. No período de acumulação, se não houvesse incidência de juros, o montante acumulado seria de, apenas, R$ 270.000,00. (<span class="math inline">\(500\times 540\)</span>). Os juros compostos é que foram responsáveis, durante todo o período, em levar o capital que seria de R$ 270.000,00 para R$ 1.378.000,00.</p>
<p>Já no período de utilização do capital acumulado, ou seja, durante a aposentadoria, se não existisse a incidência de juros sobre o saldo remanescente, o capital seria suficiente para remunerar o aposentado por apenas 137 meses. Como os juros incidem sobre o saldo remanescente em cada período, o capital remunera o aposentado à quantia desejada por 234 meses.</p>
</div>
</div>
</section>
</section>
<section id="séries-gradientes-uniformes" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="séries-gradientes-uniformes"><span class="header-section-number">2.4</span> Séries Gradientes Uniformes</h2>
<p>As séries gradientes uniformes são séries cujos valores das prestações variam no tempo de acordo com uma regra, como a progressão aritmética (PA) ou a progressão geométrica (PG). As séries gradientes podem ser crescentes ou decrescentes <em>i.e.</em> elas podem ter prestações que aumentam com o tempo, ou que diminuem com o tempo.</p>
<section id="séries-gradientes-em-pa" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="séries-gradientes-em-pa"><span class="header-section-number">2.4.1</span> Séries Gradientes em PA</h3>
<p>Como dito anteriormente, as séries gradientes em PA podem ser crescentes ou decrescentes. A princípio não adequado que financiamentos sejam feitos à prestações crescentes. Em geral, quando as prestações de um financiamento não são iguais, elas são decrescentes. Porém, pode-se imaginar situações onde prestações inicialmente menores são desejáveis, como veremos. Mais natural, contudo, é que as séries crescentes estejam relacionadas à aplicações financeiras.</p>
<section id="séries-crescentes-em-pa" class="level4" data-number="2.4.1.1">
<h4 data-number="2.4.1.1" class="anchored" data-anchor-id="séries-crescentes-em-pa"><span class="header-section-number">2.4.1.1</span> Séries Crescentes em PA</h4>
<p>O tratamento das séries gradientes uniformes crescentes em PA são tratadas de acordo com a <a href="#eq-GradienteCrescentePA" class="quarto-xref">Equação&nbsp;<span>2.9</span></a>.</p>
<p><span id="eq-GradienteCrescentePA"><span class="math display">\[
PV = \frac{1}{i(1+i)^t} \left [ A[(i+1)^t-1] + G \left ( \frac{(1+i)^t-1}{i} - t \right )\right]
\tag{2.9}\]</span></span></p>
<p>Em que <span class="math inline">\(A\)</span> é a renda-base e <span class="math inline">\(G\)</span> é o gradiente da série.</p>
<p>É usual que os pagamentos da séria sejam divididos em dois componentes, um básico e constante igual a <span class="math inline">\(A\)</span> e outro aritmeticamente crescente, com razão <span class="math inline">\(G\)</span>.</p>
<p>A parte do PV correspondente à renda-base é calculada conforme a <a href="#eq-fatorPA" class="quarto-xref">Equação&nbsp;<span>2.10</span></a>:</p>
<p><span id="eq-fatorPA"><span class="math display">\[
\frac{P}{A} = \frac{(1+i)^t-1}{i(1+i)^t} = \text{FVP}(i\%,t)
\tag{2.10}\]</span></span></p>
<p>E a parte do PV correspondente ao gradiente é calculada conforme a <a href="#eq-fatorPG" class="quarto-xref">Equação&nbsp;<span>2.11</span></a></p>
<p><span id="eq-fatorPG"><span class="math display">\[
\frac{P}{G} = \frac{(1+i)^t-i.n-1}{i^2(1+i)^t}
\tag{2.11}\]</span></span></p>
<p>Para melhor compreender, vamos utilizar um exemplo: imagine que você precisa de um financiamento de R$ 90.000,00 para iniciar a sua atividade empresarial. Você procura uma instituição financeira que lhe possibilite o pagamento deste empréstimo em 10 parcelas anuais. Quando você chega à instituição, no entanto, o gerente PJ da instituição argumenta que, como você ainda irá começar as suas atividades de negócios, você precisa de um alívio inicial, então ele lhe propõe um financiamento com 2 anos de carência, <em>i.e.</em>, dois anos para começar a pagar o empréstimo, em parcelas anuais. Além da carência de dois anos, a instituição financeira ainda te oferece uma condição especial para facilitar o pagamento das primeiras parcelas: você pode começar a pagar o empréstimo depois de 2 anos em 9 prestações crescentes com o tempo. Como você tem dúvidas a respeito de quanto tempo o seu negócio irá demorar a engrenar, você está inclinado a aceitar esta condição, ou seja, aceitar que as prestações aumentem com o tempo, pois você terá prestações mais baixas a honrar durante os primeiros anos. Considerando que a taxa de juros do financiamento é de 5,80% a.a., calcule o valor das prestações do financiamento. Calcule também o valor da prestação constante equivalente, ou seja, o valor da prestação caso o empréstimo fosse ser pago sem carência e em prestações iguais, como de costume.</p>
<p>O cálculo do valor das prestações pode ser feito com as equações <a href="#eq-fatorPA" class="quarto-xref"><span>2.10</span></a> e <a href="#eq-fatorPG" class="quarto-xref"><span>2.11</span></a>. Considerando-se que não haverá o pagamento da primeira prestação do empréstimo, que depois terá prestações crescentes, então <span class="math inline">\(A = 0\)</span>. O valor de <span class="math inline">\(G\)</span> é o que queremos calcular. Para isto, precisamos apenas da <a href="#eq-fatorPG" class="quarto-xref">Equação&nbsp;<span>2.11</span></a>:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
\frac{P}{G} &amp;= \frac{(1+5,80\%)^{10}-5,80\%.10-1}{5,80\%^2(1+5,80\%)^{10}} \\
\frac{90.000,00}{G} &amp;= \frac{0,17734}{0,00591} \\
\frac{90.000,00}{G} &amp;= 30 \Rightarrow G = 3.000,00
\end{split}
\end{aligned}
\]</span></p>
<p>Temos portanto que as prestações irão crescer a uma razão de R$ 3.000,00 por ano, à partir do ano 2.</p>
<p>O fluxo de caixa deste financiamento pode ser visto na Figura <a href="#fig-FCGradientePA" class="quarto-xref">Figura&nbsp;<span>2.2</span></a></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-FCGradientePA" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center" data-fig-pos="H">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-FCGradientePA-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./img-modelagem/fig-FCGradientePA-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" data-fig-pos="H">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-FCGradientePA-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.2: Fluxo de Caixa de um empréstimo com pagamentos crescentes em PA.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Os valores de <span class="math inline">\(R_1\)</span> à <span class="math inline">\(R_9\)</span> serão iguais a <span class="math inline">\(1G, 2G, 3G, \ldots, 9G\)</span>, ou seja, ] <span class="math inline">\(3.000, 6.000, 9.000, \ldots, 27.000\)</span>.</p>
<p>O valor da prestação equivalente uniforme pode ser calculado de acordo com a <a href="#eq-Pequivalente" class="quarto-xref">Equação&nbsp;<span>2.12</span></a>:</p>
<p><span id="eq-Pequivalente"><span class="math display">\[
P_{equivalente} = G.\left ( \frac{1}{i}-\frac{t}{(1+i)^t-1} \right)
\tag{2.12}\]</span></span></p>
<p>O termo <span class="math inline">\(\left ( \frac{1}{i}-\frac{t}{(1+i)^t-1} \right)\)</span> é chamado de fator de série gradiente uniforme (GUS) e pode ser tabelado. Para o exemplo:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
\text{GUS}(5,80\%, 10) &amp;= \left ( \frac{1}{5,80\%}-\frac{10}{(1+5,80\%)^{10}-1} \right) = 4,037\\
P_{equivalente} &amp;= 3.000,00.\text{GUS}(5,80\%, 10) \\
P_{equivalente} &amp;= 3.000 \times 4,037 \\
P_{equivalente} &amp;= 12.112,00
\end{split}
\end{aligned}
\]</span></p>
<p>Em suma, o empresário teria que começar a pagar o empréstimo depois de apenas 1 ano, com valor de R$ 12.112,00 anuais. Porém, as prestações crescentes no tempo lhe permitem um bom alívio durantes os anos de estruturação do seu negócio.</p>
</section>
<section id="séries-decrescentes-em-pa" class="level4" data-number="2.4.1.2">
<h4 data-number="2.4.1.2" class="anchored" data-anchor-id="séries-decrescentes-em-pa"><span class="header-section-number">2.4.1.2</span> Séries Decrescentes em PA</h4>
<p>As séries gradientes decrescentes em PA podem ter um tratamento mais fácil do que as séries de pagamentos crescentes em situações particulares. Inicialmente, é preciso esclarecer que as séries gradientes decrescentes em PA podem ser tratadas com a <a href="#eq-GradienteCrescentePA" class="quarto-xref">Equação&nbsp;<span>2.9</span></a> apenas fazendo uso de um valor negativo de G. Porém, é mais comum tratarmos as séries gradientes uniformes decrescentes de acordo com a <a href="#eq-GradienteDecrescentePA" class="quarto-xref">Equação&nbsp;<span>2.13</span></a>, que é válida quando a última prestação tem valor <span class="math inline">\(G\)</span> e as outras prestações são um múltiplo deste último pagamento:</p>
<p><span id="eq-GradienteDecrescentePA"><span class="math display">\[
PV = \frac{G}{i(1+i)^t} \left [  t(1+i)^t - \left ( \frac{(1+i)^t-1}{i} \right ) \right ]
\tag{2.13}\]</span></span></p>
<p>É importante observar que, assim, a série gradiente decrescente depende apenas de <span class="math inline">\(G\)</span> e não depende de uma renda-base <span class="math inline">\(A\)</span>, como a série gradiente uniforme crescente.</p>
<p>As séries gradientes uniformes decrescentes são muito utilizadas nas finanças pois podem ser usadas para o cômputo de prestações decrescentes no tempo, como no caso dos financiamentos habitacionais realizados através do sistema de amortizações constantes (SAC).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exemplo do Cálculo de tabela SAC com séries gradientes uniformes
</div>
</div>
<div class="callout-body-container callout-body">
<p>Uma família, buscando realizar o sonho da casa própria, pretende comprar uma casa com valor de R$ 500.000,00. Com muito suor, eles conseguiram poupar R$ 100.000,00 (20%) para a entrada, exigida pela instituição financeira. Eles pretendem financiar os R$ 400.000,00 restantes em 360 meses. A taxa de juros divulgada pela instituição é de 12% a.a., válida para financimentos contratados pelo sistema de amortizações constantes (SAC), em que a primeira parcela é mais alta e depois decresce linearmente com o tempo. Neste tipo de financiamento, o mutário paga um valor fixo (a amortização constante, que dá nome ao sistema), que é igual ao valor financiado dividido pelo prazo do financiamento (no caso, <span class="math inline">\(400.000,00 / 360 = \text{R\$ }1.111,11\)</span>), mais uma prestação variável no tempo, que incide sobre o saldo devedor de cada período. Calcule o valor da última e da primeira prestação. Calcule o valor presente dos juros pagos ao longo do contrato. Calcule o valor da prestação uniforme equivalente, ou seja, o valor da prestação que teria lugar caso as parcelas fossem constantes.</p>
<p>A última prestação, por definição, será igual a R$ 1.111,11, valor da amortização mensal, que estará presente em todas as parcelas do financiamento, mais o juro correspondente ao financiamento destes R$ 1.111,11 por 1 período (o período que vai do final do penúltimo mês do financiamento, até o último dia do último mês do financiamento), ou seja, <span class="math inline">\(1.111,11.(1+12\%)^{1/12} = \text{R\$
}10,54\)</span>. Assim, a última prestação terá valor igual a R$ 1.121,65 (<span class="math inline">\(1.111,11+10,54\)</span>).</p>
<p>O valor da última prestação, como estamos no SAC, é igual a <span class="math inline">\(1.111,11 +
360.10,54 = 1.111,11 + 3.795,52 = 4.906,63\)</span>.</p>
<p>O valor presente dos juros pagos ao longo do contrato é calculado de acordo com a <a href="#eq-GradienteDecrescentePA" class="quarto-xref">Equação&nbsp;<span>2.13</span></a>, com <span class="math inline">\(G=10,54\)</span>, <span class="math inline">\(i=(1+12\%)^{1/12} = 0,95\%\)</span> a.m., e <span class="math inline">\(t = 360\)</span>:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
PV &amp;= \frac{10,54}{0,95\%(1+0,95\%)^{360}} \left [  360(1+0,95\%)^{360} - \left ( \frac{(1+0,95\%)^{360}-1}{0,95\%} \right ) \right ] \\
PV &amp;= 36,88(10.828,76 - 3.061,04) \\
PV &amp;= 286.473,50
\end{split}
\end{aligned}
\]</span></p>
<p>Assim como no exemplo anterior, pode-se calcular a prestação uniforme equivalente referente aos juros pagos ao longo do contrato. No entanto, como temos o valor presente dos juros, basta utilizar a <a href="#eq-MVA1" class="quarto-xref">Equação&nbsp;<span>2.5</span></a> para calcular, baseado na taxa de juros e no número de prestações, o valor da prestação:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
\text{FRC}(0,95\%, 360) &amp;= 0,0098 \\
P_{equivalente} &amp;= C.\text{FRC}(0,95\%, 360) \\
P_{equivalente} &amp;= 286.473,50 \times 0,0098 \\
P_{equivalente} &amp;= 2.815,08
\end{split}
\end{aligned}
\]</span></p>
<p>A prestação pelo sistema Price, portanto, seria igual a R$ 3.926,19 (<span class="math inline">\(2.815.08+1.111,11\)</span>). É fácil mostrar que o valor presente desta prestação fixa é igual ao valor financiado:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
C &amp;= P.\text{FVP}(i\%, t) \\
C &amp;= 3.926,19.\text{FVP}(0,95\%,360) \\
C &amp;= 3.926,19\times101,764 \\
C &amp;\approx 400.000,00
\end{split}
\end{aligned}
\]</span></p>
</div>
</div>
</section>
</section>
<section id="séries-gradientes-uniformes-em-pg" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="séries-gradientes-uniformes-em-pg"><span class="header-section-number">2.4.2</span> Séries Gradientes Uniformes em PG</h3>
<p>As séries gradientes uniformes em PG são séries cuja regra de crescimento é feita por um fator multiplicativo (<span class="math inline">\(g\)</span>) e não aditivo, como nas séries em PA. O valor presente de uma série gradiente com primeiro pagamento <span class="math inline">\(A_1\)</span> e crescimento (ou decrescimento) a uma taxa constante <span class="math inline">\(g\)</span> pode ser calculado de acordo com a equação <a href="#eq-GradienteGeometrico" class="quarto-xref">Equação&nbsp;<span>2.14</span></a>:</p>
<p><span id="eq-GradienteGeometrico"><span class="math display">\[
PV = \frac{A_1}{(1+i)^t} \left[ \frac{g^t-(1+i)^t}{g-(1+i)} \right]
\tag{2.14}\]</span></span></p>
<p>O Diagrama de um Fluxo de Caixa de uma série de pagamentos com crescimento em PG tem a forma da <a href="#fig-FCGradientePG" class="quarto-xref">Figura&nbsp;<span>2.3</span></a></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-FCGradientePG" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center" data-fig-pos="H">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-FCGradientePG-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="./img-modelagem/fig-FCGradientePG-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%" data-fig-pos="H">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-FCGradientePG-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.3: Fluxo de Caixa de um empréstimo com pagamentos crescentes em PG.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Em que as prestações <span class="math inline">\(R_1, R_2, R_3, \ldots, R_t\)</span> assumirão valores <span class="math inline">\(A_1,
A_1(1+g), A_1(1+g)^2, \ldots, A_1(1+g)^{t-1}\)</span>.</p>
<p>Existem na literatura dois fatores que tornam o tratamento destes tipos de séries mais agradável. O primeiro, que é aplicável quando o valor da taxa <span class="math inline">\(i\)</span> é diferente do valor da taxa de crescimento <span class="math inline">\(g\)</span>, que é equivalente à <a href="#eq-GradienteGeometrico" class="quarto-xref">Equação&nbsp;<span>2.14</span></a>:</p>
<p><span id="eq-fatorPG1"><span class="math display">\[
PV = A_1\left [ \frac{1-\left( \frac{1+g}{1+i}\right )^t}{i-g}\right]
\tag{2.15}\]</span></span></p>
<p>E o segundo, que é aplicável nos casos em que <span class="math inline">\(g = i\)</span>:</p>
<p><span id="eq-fatorPG2"><span class="math display">\[
PV = \frac{nA_1}{1+i}
\tag{2.16}\]</span></span></p>
<p>É fácil veriicar que, quando <span class="math inline">\(t\)</span> aumenta, se <span class="math inline">\(g&lt;i\)</span>, então o termo <span class="math inline">\([(1+g)/(1+i)]^t\)</span> tende a zero e a <a href="#eq-fatorPG1" class="quarto-xref">Equação&nbsp;<span>2.15</span></a> torna-se:</p>
<p><span class="math display">\[
PV = A_1\left [ \frac{1-0}{i-g}\right] = \frac{A_1}{i-g} \qquad \text{se } i&gt;g \text{ e t é grande}
\]</span></p>
<p>A taxa obtida através da subtração de <span class="math inline">\(g\)</span> de <span class="math inline">\(i\)</span> é chamada de taxa de capitalização (<span class="math inline">\(c\)</span>).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exemplo do utilização de séries gradientes uniformes em PG
</div>
</div>
<div class="callout-body-container callout-body">
<p>Um industrial procura um empréstimo para adquirir um novo equipamento para a sua indústria já consolidada. O novo equipamento irá subsituir um equipamento ainda em produção, porém já obsoleto. Assim, o seu faturamento líquido com os produtos produzidos com este equipamento tenderá a se manter constante, com valor igual a R$ 300.000,00/ano. Porém, o seu custo de manutenção tende a diminuir com o novo equipamento, o que garante o retorno do seu investimento. O problema é que o novo equipamento custa R$ 1.200.000,00 e o empresário não dispõe deste montante para realizar o investimento. Então o empresário procura um banco de desenvolvimento e mostra toda a viabilidade do seu investimento na troca do equipamento em produção. O gerento do banco, então, lhe apresenta a seguinte proposta: uma linha de financiamento de 5 anos, em que no final de cada ano você irá pagar um quinto do principal (<span class="math inline">\(1.200.000,00/5 = 240.000\)</span>) mais uma taxa de juros referente a este valor amortizado em cada período. Em outras palavras, em cada anuidade, você irá quitar 1/5 do valor emprestado, mais os juros referentes a este 1/5 de capital quitado calculado para aquele período. As taxas de juros são de 4,2% a.a. Calcule o valor das prestações do primeiro ao quinto ano e verifique se, apenas o faturamento líquido obtido com o próprio equipamento, o empresário é capaz de honrar com as prestações.</p>
<p>Como as prestações irão crescer apenas na magnitude dos juros cobrados, então o valor da primeira parcela pode ser calculado de acordo com a <a href="#eq-fatorPG2" class="quarto-xref">Equação&nbsp;<span>2.16</span></a>:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
1.200.000 &amp;= \frac{5A_1}{1+4,2\%}\\
A_1 &amp;= \frac{1.200.000 \times 1,042}{5} \\
A_1 &amp;= 250.080,00
\end{split}
\end{aligned}
\]</span></p>
<p>O valor das parcelas <span class="math inline">\(A_2\)</span> à <span class="math inline">\(A_5\)</span> serão calculadas de acordo com um fator de crescimento <span class="math inline">\(g = 4,2\%\)</span>:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
A_2 &amp;= 250.080 \times (1+4,2\%) = 260.583,36 \\
A_3 &amp;= 250.080 \times (1+4,2\%)^2 = 271.527,86 \\
A_4 &amp;= 250.080 \times (1+4,2\%)^3 = 282.932,03 \\
A_5 &amp;= 250.080 \times (1+4,2\%)^4 = 294.815,18
\end{split}
\end{aligned}
\]</span></p>
<p>Com o faturamento líquido atual de R$ 300.000,00/ano o empresário já seria capaz de honrar as prestações apenas com faturamento oriundo do funcionamento do próprio equipamento. Como o empresário deverá ainda ter um menor custo de manutenção com o equipamento, o seu faturamento líquido com ele deverá ainda aumentar, o que irá facilitar ainda mais o pagamento das parcelas anuais.</p>
</div>
</div>
<p>O exemplo acima ilustra bem como seria vantajoso optar por um empréstimo com pagamentos em séries gradientes uniformes em PG com <span class="math inline">\(i=g\)</span>, visando substituir um equipamento existente por um outro novo, com menores custos de manutenção. Não há desequilíbrios de caixa, pois o próprio faturamento é capaz de pagar pelas prestações do financiamento.</p>
<p>Um segundo tipo de problema é o que decorre de uma ampliação, ou da compra de um segundo equipamento, que terá o efeito de ampliar a produção. Com a compra do novo equipamento, idêntico a um já existente, seria possível dobrar a produção. A demanda, porém, pode não ser suficiente para absorver toda a produção de imediato. O segundo exemplo, portanto, irá considerar que há um crescimento gradual da demanda, e por isso o ideal é que as condições de pagamento do financiamento sejam adequadas a este cenário.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Séries gradientes uniformes em PG: quando utilizar <span class="math inline">\(g \neq i\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Um empresário pretende ampliar a sua produção atual com a aquisição de um novo equipamento. No entanto, o empresário entende que o aumento da sua produção deverá acompanhar o aumento da sua demanda anual. Dado que com o equipamento atual ele fatura líquidos R$ 500.000,00/ano, ele entende que com os dois equipamentos em produção ele poderá vir a faturar até R$ 1.000.000,00/ano, o que deverá ocorrer num prazo de 4 anos, ou seja, ele estima um crescimento anual nas vendas de 100% em 4 anos, uma taxa de aumento nas vendas de <span class="math inline">\((1+100\%)^{1/4}
\approx 18,92\% a.a.\)</span>). Ele precisa, portanto, de um financiamento com prestações iniciais mais baixas, porque o faturamento projetado à partir da aquisição será: no primerio ano, igual a , ou seja, um adicional de 94.603,50 em relação ao faturamento atual; n<span class="math inline">\(500.000\times(1+18,92\%) = 594.603,50\)</span>o segundo ano, igual a <span class="math inline">\(500.000\times(1+18,92\%)^2 = 707.106,64\)</span>, ou seja, 207.106,64 adicionais; no terceiro ano, <span class="math inline">\(500.000\times(1+18,92\%)^3 = 840.896,17\)</span>, ou seja, 340.896,17 adicionais; e, finalmente, após o 4º da aquisição, <span class="math inline">\(500.000\times(1+18,92\%)^4 = 1.000.000,00\)</span>, ou seja, 500.000,00 adicionais. Ao procurar um banco de desenvolvimento, ele se deparou com a seguinte oportunidade de financiamento: taxas de juros de 3,0 % a.a., com pagamento em 4 anos, com flexibilidade nas parcelas (o empresário escolhe como quer pagar, desde que quite o financiamento num prazo de 4 anos). Dado que o novo equipamento tem custo de aquisição de R$ 1.000.000,00, como o empresário poderia pagar por este financiamento, de maneira a utilizar apenas o faturamento líquido adicional projetado devido à aquisição da nova máquina? Calcular o valor de todas as parcelas e compará-las com o faturamento adicional líquido.</p>
<p>O empresário pode utilizar a <a href="#eq-fatorPG1" class="quarto-xref">Equação&nbsp;<span>2.15</span></a> para buscar um valor de <span class="math inline">\(g\)</span> que lhe possibilite encontrar uma valor da prestação inicial <span class="math inline">\(A_1\)</span> que seja igual ou inferior ao faturamento líquido adicional do primeiro ano, ou seja, R$ 94.603,50.</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
PV &amp;= A_1\left [ \frac{1-\left( \frac{1+g}{1+i}\right )^t}{i-g}\right] \\
1.000.000,00 &amp;= 94.603,50 \left [ \frac{1-\left( \frac{1+g}{1+3,00\%}\right )^t}{3,00\%-g}\right] \\
g &amp;\approx 80\%
\end{split}
\end{aligned}
\]</span></p>
<p>Portanto, para obter uma parcela inicial de valor menor ou igual ao faturamento líquido adicional projetado, o empresário terá que arcar com aumento das parcelas do financiamento em 80% a cada ano.</p>
<p>Os valores das parcelas <span class="math inline">\(A_1\)</span> à <span class="math inline">\(A_5\)</span> serão iguais a:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
A_1 &amp;= P.\left [ \frac{3,0\%-80\%}{1-\left( \frac{1+80\%}{1+3,0\%}\right )^t}\right] = 92.470,48   \\
A_2 &amp;= A_1(1+g) = 92.470,48.(1+60\%) = 166.446,87\\
A_3 &amp;= A_1(1+g)^2 = 92.470,48.(1+80\%)^2 = 299.604,36\\
A_4 &amp;= A_1(1+g)^3 = 92.470,48.(1+80\%)^3 = 539.287,85
\end{split}
\end{aligned}
\]</span></p>
<p>Como o faturamento líquido adicional projetado é superior ao valor das parcelas ano a ano, exceto pelo valor da última parcela, que é levemento superior ao do faturamento adicional projetado, o empréstimo está bem equalizado. Este valor um pouco superior da última parcela não é preocupante haja vista que há gordura nos anos anteriores no faturamento adicional em relação ao valor das parcelas pagas.</p>
<p>Pode-se verificar com a <a href="#eq-fatorPG1" class="quarto-xref">Equação&nbsp;<span>2.15</span></a> que o fluxo de pagamento corresponde ao valor presente do investimento:</p>
<p><span class="math display">\[
\begin{aligned}
\begin{split}
PV &amp;= A_1 \left [ \frac{1-\left( \frac{1+g}{1+i}\right )^t}{i-g}\right] \\
PV &amp;= 92.470,48 \left [ \frac{1-\left( \frac{1+80\%}{1+3,0\%}\right )^4}{3,0\%-80\%}\right] \\
PV &amp;= 92.470,48 \times 10,8143 \\
PV &amp;= 1.000.000,00
\end{split}
\end{aligned}
\]</span></p>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Machline" class="csl-entry" role="listitem">
Machline, Claude. 1966. <span>“Análise de Investimentos e Inflação.”</span> <em>Revista de Administração de Empresas</em>, no. 18: 51–126. <a href="https://doi.org/10.1590/S0034-75901966000100002">https://doi.org/10.1590/S0034-75901966000100002</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>O fator de amortização, ou fator de recuperação do capital é utilizado no conhecido Sistema <em>Price</em> de Amortização, ou Sistema Francês de Amortização (Tabela <em>Price</em>).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./intro.html" class="pagination-link" aria-label="Introdução">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./economica.html" class="pagination-link" aria-label="Engenharia Econômica">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Engenharia Econômica</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>